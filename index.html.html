<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IBM Z/OS Operator Console - MVS System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #00ff00;
            overflow-x: hidden;
            line-height: 1.3;
            font-size: 14px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 15px;
            border: 2px solid #00ff00;
            border-radius: 3px;
            margin-top: 10px;
            background: rgba(0, 20, 0, 0.8);
        }
        
        .header {
            text-align: center;
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00ff00;
            letter-spacing: 1px;
            color: #00ffff;
        }
        
        .system-info {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid #00ffff;
            padding: 10px;
            margin-bottom: 20px;
            font-size: 0.9em;
        }
        
        .section {
            margin-bottom: 25px;
            border: 1px solid #00ff00;
            background: rgba(0, 40, 0, 0.3);
        }
        
        .section-header {
            background: rgba(0, 255, 0, 0.2);
            padding: 8px 15px;
            border-bottom: 1px solid #00ff00;
            font-weight: bold;
            color: #ffff00;
        }
        
        .section-content {
            padding: 15px;
        }
        
        .job-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85em;
        }
        
        .job-table th,
        .job-table td {
            border: 1px solid #666;
            padding: 4px 8px;
            text-align: left;
            font-family: 'Courier New', monospace;
        }
        
        .job-table th {
            background: rgba(0, 255, 255, 0.2);
            color: #00ffff;
            font-weight: bold;
        }
        
        .status-EXECUTING {
            color: #ffff00;
            animation: pulse 2s infinite;
        }
        
        .status-ENDED {
            color: #00ff00;
        }
        
        .status-ABENDED {
            color: #ff4444;
            animation: blink 1s infinite;
        }
        
        .status-INPUT {
            color: #66ccff;
        }
        
        .status-HELD {
            color: #ff8800;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .console {
            background: #000;
            border: 2px solid #00ff00;
            padding: 15px;
            height: 450px;
            overflow-y: auto;
            font-size: 0.82em;
            font-family: 'Courier New', monospace;
        }
        
        .console-line {
            margin: 1px 0;
            word-wrap: break-word;
            white-space: pre-wrap;
        }
        
        .msg-info {
            color: #00ff00;
        }
        
        .msg-warning {
            color: #ffaa00;
        }
        
        .msg-error {
            color: #ff4444;
        }
        
        .msg-system {
            color: #00ffff;
        }
        
        .msg-job {
            color: #ffff00;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
        }
        
        .stat-box {
            border: 1px solid #00ff00;
            padding: 12px;
            text-align: center;
            background: rgba(0, 255, 0, 0.05);
            font-size: 0.9em;
        }
        
        .stat-label {
            color: #ffff00;
            font-size: 0.8em;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 1.4em;
            font-weight: bold;
            color: #00ff00;
        }
        
        .control-panel {
            margin: 15px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            background: #000;
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 6px 12px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn:hover {
            background: rgba(0, 255, 0, 0.1);
            box-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
        }
        
        .command-line {
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .command-prompt {
            color: #ffff00;
            font-weight: bold;
        }
        
        .command-input {
            background: #000;
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 5px 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            flex: 1;
        }
        
        .command-input:focus {
            outline: none;
            box-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
        }
        
        .lpar-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid #00ffff;
            margin-bottom: 15px;
            font-size: 0.9em;
        }
        
        .status-light {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .light-green {
            background: #00ff00;
            box-shadow: 0 0 8px #00ff00;
        }
        
        .light-yellow {
            background: #ffff00;
            box-shadow: 0 0 8px #ffff00;
        }
        
        .light-red {
            background: #ff4444;
            box-shadow: 0 0 8px #ff4444;
        }
        
        .info-display {
            background: #000;
            border: 2px solid #00ffff;
            padding: 15px;
            height: 450px;
            overflow-y: auto;
            font-size: 0.82em;
            font-family: 'Courier New', monospace;
        }
        
        .info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #00ffff;
            color: #00ffff;
            font-weight: bold;
        }
        
        .btn-small {
            padding: 4px 8px;
            font-size: 0.75em;
        }
        
        .info-content {
            color: #00ff00;
        }
        
        .info-placeholder {
            padding: 10px;
            border: 1px solid #333;
            border-radius: 3px;
            background: rgba(0, 255, 255, 0.05);
        }
        
        .info-title {
            color: #ffff00;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.1em;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px dotted #333;
        }
        
        .info-label {
            color: #66ccff;
            font-weight: bold;
        }
        
        .info-value {
            color: #00ff00;
        }
        
        .status-active {
            color: #00ff00;
            font-weight: bold;
        }
        
        .status-inactive {
            color: #ff4444;
            font-weight: bold;
        }
        
        .status-warning {
            color: #ffaa00;
            font-weight: bold;
        }
        
        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        
        .info-table th,
        .info-table td {
            border: 1px solid #333;
            padding: 4px 8px;
            text-align: left;
            font-size: 0.9em;
        }
        
        .info-table th {
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            font-weight: bold;
        }
        
        .info-section {
            margin: 15px 0;
            padding: 10px;
            border: 1px solid #444;
            border-radius: 3px;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .info-section-title {
            color: #ffff00;
            font-weight: bold;
            margin-bottom: 10px;
            border-bottom: 1px solid #444;
            padding-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">IBM Z/OS MVS SYSTEM - OPERATOR CONSOLE</div>
        
        <div class="system-info">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>SYSTEM: MVS1 (z/OS 2.5)  |  LPAR: PROD1  |  IPL: 2025.201 10:15:30</div>
                <div>CPU: 85% BUSY  |  STORAGE: 67% UTIL  |  I/O RATE: 1247/SEC</div>
            </div>
        </div>

        <div class="lpar-status">
            <div style="display: flex; align-items: center;">
                <div class="status-light light-green"></div>
                <span>JES2 ACTIVE</span>
            </div>
            <div style="display: flex; align-items: center;">
                <div class="status-light light-green"></div>
                <span>TSO/ISPF READY</span>
            </div>
            <div style="display: flex; align-items: center;">
                <div class="status-light light-yellow"></div>
                <span>CICS REGIONS: 12 ACTIVE</span>
            </div>
            <div style="display: flex; align-items: center;">
                <div class="status-light light-green"></div>
                <span>DB2 SUBSYSTEM OPERATIONAL</span>
            </div>
        </div>

        <div class="section">
            <div class="section-header">JES2 JOB QUEUE STATUS (SDSF DA)</div>
            <div class="section-content">
                <table class="job-table">
                    <thead>
                        <tr>
                            <th>JOBNAME</th>
                            <th>JOBID</th>
                            <th>OWNER</th>
                            <th>STATUS</th>
                            <th>CLASS</th>
                            <th>PRI</th>
                            <th>QUEUE</th>
                            <th>JNUM</th>
                            <th>PROC/STEP</th>
                            <th>CPU TIME</th>
                            <th>DATE</th>
                        </tr>
                    </thead>
                    <tbody id="jobTableBody">
                        <!-- Jobs will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="section">
            <div class="section-header">SYSTEM PERFORMANCE METRICS</div>
            <div class="section-content">
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-label">JOBS EXECUTED</div>
                        <div class="stat-value" id="jobsExecuted">2,847</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">ABEND RATE</div>
                        <div class="stat-value" id="abendRate">0.7%</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">ACTIVE TASKS</div>
                        <div class="stat-value" id="activeTasks">127</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">SPOOL USAGE</div>
                        <div class="stat-value" id="spoolUsage">23%</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">MSU RATING</div>
                        <div class="stat-value" id="msuRating">1847</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">DASD UTIL</div>
                        <div class="stat-value" id="dasdUtil">78%</div>
                    </div>
                </div>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="section">
                <div class="section-header">MVS SYSTEM CONSOLE LOG</div>
                <div class="section-content">
                    <div class="console" id="console">
                        <div class="console-line msg-system">IEE600I REPLY TO 01 IS;                                                 </div>
                        <div class="console-line msg-system">IEA101I SPECIFY SYSTEM PARAMETERS FOR RELEASE z/OS 02.05.00           </div>
                        <div class="console-line msg-system">IEA989I SLIP PER CPU OBTAINED                                           </div>
                        <div class="console-line msg-system">$HASP426 JES2 JOB INPUT QUEUE EMPTY                                    </div>
                    </div>
                    
                    <div class="control-panel">
                        <button class="btn" onclick="submitJob()">SUBMIT JOB</button>
                        <button class="btn" onclick="displayActive()">D A,L</button>
                        <button class="btn" onclick="displayJobs()">$DJQ</button>
                        <button class="btn" onclick="displayTime()">D T</button>
                        <button class="btn" onclick="clearConsole()">CLEAR</button>
                        <button class="btn" onclick="toggleSystem()" id="systemToggle">QUIESCE</button>
                    </div>
                    
                    <div class="command-line">
                        <span class="command-prompt">==></span>
                        <input type="text" class="command-input" id="commandInput" placeholder="Enter MVS command (K, D, S, V, etc.)" onkeypress="handleCommand(event)">
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">SYSTEM INFORMATION DISPLAY</div>
                <div class="section-content">
                    <div class="info-display" id="infoDisplay">
                        <div class="info-header">
                            <span>Ready for display commands...</span>
                            <button class="btn btn-small" onclick="clearInfoDisplay()">CLEAR DISPLAY</button>
                        </div>
                        <div class="info-content" id="infoContent">
                            <div class="info-placeholder">
                                <div class="info-title">SYSTEM STATUS SUMMARY</div>
                                <div class="info-grid">
                                    <div class="info-item">
                                        <span class="info-label">System:</span>
                                        <span class="info-value">MVS1 (z/OS 2.5)</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">LPAR:</span>
                                        <span class="info-value">PROD1</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">IPL Date:</span>
                                        <span class="info-value">2025.201</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">JES2 Status:</span>
                                        <span class="info-value status-active">ACTIVE</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let jobs = [
            {jobname: "PAYROL01", jobid: "JOB04726", owner: "PAYROLL", status: "EXECUTING", class: "A", priority: "15", queue: "EXEC", jnum: "00047", step: "STEP002", cpu: "00:02:45", date: "2025.201"},
            {jobname: "BACKUP1", jobid: "STC04721", owner: "SYSOPR", status: "ENDED", class: "S", priority: "12", queue: "", jnum: "00042", step: "IEBGENER", cpu: "00:15:23", date: "2025.201"},
            {jobname: "CICSREG1", jobid: "STC04708", owner: "CICSUSER", status: "EXECUTING", class: "S", priority: "15", queue: "EXEC", jnum: "00035", step: "DFHRPL", cpu: "01:23:45", date: "2025.201"},
            {jobname: "SORT001", jobid: "JOB04729", owner: "BATCHUSR", status: "INPUT", class: "B", priority: "8", queue: "INPUT", jnum: "00049", step: "", cpu: "00:00:00", date: "2025.201"},
            {jobname: "REPORTX", jobid: "JOB04725", owner: "REPORTS", status: "ABENDED", class: "A", priority: "10", queue: "", jnum: "00046", step: "STEP001", cpu: "00:00:12", date: "2025.201"},
            {jobname: "DB2DIST", jobid: "STC04715", owner: "DB2ADMIN", status: "EXECUTING", class: "S", priority: "15", queue: "EXEC", jnum: "00038", step: "DSNTINST", cpu: "00:45:12", date: "2025.201"},
            {jobname: "ARCHIV1", jobid: "JOB04728", owner: "ARCHIVE", status: "HELD", class: "C", priority: "3", queue: "HELD", jnum: "00048", step: "", cpu: "00:00:00", date: "2025.201"},
            {jobname: "COBOL01", jobid: "JOB04730", owner: "DEVUSER", status: "INPUT", class: "B", priority: "5", queue: "INPUT", jnum: "00050", step: "", cpu: "00:00:00", date: "2025.201"}
        ];

        let isSystemActive = true;
        let jobCounter = 4731;
        let messageCounter = 1;

        const jobNames = ["PAYROL", "BACKUP", "SORT", "REPORT", "ARCHIV", "COBOL", "PLI", "ASSEMB", "LINKEDI", "COPY"];
        const owners = ["PAYROLL", "SYSOPR", "BATCHUSR", "REPORTS", "DEVUSER", "TESTUSER", "PRODUSER"];
        const classes = ["A", "B", "C", "S"];
        const steps = ["STEP001", "STEP002", "IEBGENER", "SORT", "IDCAMS", "IEBCOPY", "LINKEDI", "DFHRPL"];

        function updateJobTable() {
            const tbody = document.getElementById('jobTableBody');
            tbody.innerHTML = '';
            
            jobs.forEach(job => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${job.jobname}</td>
                    <td>${job.jobid}</td>
                    <td>${job.owner}</td>
                    <td class="status-${job.status}">${job.status}</td>
                    <td class="job-class">${job.class}</td>
                    <td>${job.priority}</td>
                    <td>${job.queue}</td>
                    <td>${job.jnum}</td>
                    <td>${job.step}</td>
                    <td>${job.cpu}</td>
                    <td>${job.date}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function addConsoleMessage(message, type = 'info') {
            const console = document.getElementById('console');
            const messageLine = document.createElement('div');
            messageLine.className = `console-line msg-${type}`;
            messageLine.textContent = message.padEnd(80);
            console.appendChild(messageLine);
            console.scrollTop = console.scrollHeight;
            
            // Keep console manageable
            if (console.children.length > 50) {
                console.removeChild(console.firstChild);
            }
        }

        function getCurrentJulianDate() {
            const now = new Date();
            const start = new Date(now.getFullYear(), 0, 0);
            const diff = now - start;
            const oneDay = 1000 * 60 * 60 * 24;
            const dayOfYear = Math.floor(diff / oneDay);
            return `${now.getFullYear()}.${String(dayOfYear).padStart(3, '0')}`;
        }

        function getCurrentTime() {
            const now = new Date();
            return now.toTimeString().split(' ')[0];
        }

        function generateJobId() {
            return `JOB${String(jobCounter++).padStart(5, '0')}`;
        }

        function submitJob() {
            const jobName = jobNames[Math.floor(Math.random() * jobNames.length)] + 
                          String(Math.floor(Math.random() * 99) + 1).padStart(2, '0');
            const owner = owners[Math.floor(Math.random() * owners.length)];
            const jobClass = classes[Math.floor(Math.random() * classes.length)];
            
            const newJob = {
                jobname: jobName,
                jobid: generateJobId(),
                owner: owner,
                status: "INPUT",
                class: jobClass,
                priority: Math.floor(Math.random() * 16), // 0-15 range
                queue: "INPUT",
                jnum: String(jobCounter - 1).padStart(5, '0'),
                step: "",
                cpu: "00:00:00",
                date: getCurrentJulianDate()
            };
            
            jobs.unshift(newJob);
            if (jobs.length > 12) jobs.pop();
            
            addConsoleMessage(`$HASP100 ${newJob.jobname} ON READER1    READY`, 'job');
            addConsoleMessage(`IEF403I ${newJob.jobname} - STARTED - TIME=${getCurrentTime()}`, 'info');
            updateJobTable();
            updateStats();
        }

        function processJobs() {
            if (!isSystemActive) return;
            
            jobs.forEach(job => {
                const random = Math.random();
                
                if (job.status === 'EXECUTING' && random > 0.7) {
                    if (random > 0.9) {
                        if (random > 0.95) {
                            job.status = 'ABENDED';
                            job.queue = '';
                            addConsoleMessage(`IEF450I ${job.jobname} - ABEND=S0C7 U0000 REASON=00000004`, 'error');
                            addConsoleMessage(`$HASP395 ${job.jobname}   ENDED - ABEND=S0C7`, 'error');
                        } else {
                            job.status = 'ENDED';
                            job.queue = '';
                            addConsoleMessage(`IEF404I ${job.jobname} - ENDED - TIME=${getCurrentTime()}`, 'info');
                            addConsoleMessage(`$HASP395 ${job.jobname}   ENDED`, 'job');
                        }
                    }
                } else if (job.status === 'INPUT' && random > 0.85) {
                    job.status = 'EXECUTING';
                    job.queue = 'EXEC';
                    job.step = steps[Math.floor(Math.random() * steps.length)];
                    addConsoleMessage(`IEF403I ${job.jobname} - STARTED - TIME=${getCurrentTime()}`, 'info');
                    addConsoleMessage(`$HASP373 ${job.jobname} STARTED`, 'job');
                }
            });
            
            // Random system messages
            if (Math.random() > 0.92) {
                const systemMessages = [
                    `IEE136I LOCAL: TIME=${getCurrentTime()} DATE=${getCurrentJulianDate()}`,
                    `$HASP426 JES2 JOB INPUT QUEUE EMPTY`,
                    `IRA200I DFHSM SPACE MANAGEMENT CYCLE COMPLETE`,
                    `ICH408I USER(SYSOPR) GROUP(SYS1) LOGON VIA TERMINAL`,
                    `IEF032I STEP /SORT001/ START ${getCurrentTime()}`,
                    `CSV109I JOB SYSOPR  ,J0000034,SYSOPR  ,STEP IDCAMS  ,START`,
                    `$HASP050 JES2 RESOURCE SHORTAGE - CLASS=A FORMS=STD`
                ];
                const msg = systemMessages[Math.floor(Math.random() * systemMessages.length)];
                addConsoleMessage(msg, 'system');
            }
        }

        function updateInfoDisplay(title, content) {
            const infoContent = document.getElementById('infoContent');
            const infoHeader = document.querySelector('.info-header span');
            
            infoHeader.textContent = `Last Command: ${title}`;
            infoContent.innerHTML = content;
        }

        function clearInfoDisplay() {
            const infoContent = document.getElementById('infoContent');
            const infoHeader = document.querySelector('.info-header span');
            
            infoHeader.textContent = 'Ready for display commands...';
            infoContent.innerHTML = `
                <div class="info-placeholder">
                    <div class="info-title">SYSTEM STATUS SUMMARY</div>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">System:</span>
                            <span class="info-value">MVS1 (z/OS 2.5)</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">LPAR:</span>
                            <span class="info-value">PROD1</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">IPL Date:</span>
                            <span class="info-value">2025.201</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">JES2 Status:</span>
                            <span class="info-value status-active">ACTIVE</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function displayActive() {
            addConsoleMessage('D A,L', 'info');
            addConsoleMessage('IEE114I 14.25.30 ACTIVITY 456', 'system');
            
            const executing = jobs.filter(job => job.status === 'EXECUTING').length;
            const tsUsers = Math.floor(Math.random() * 20) + 25;
            const sysas = Math.floor(Math.random() * 5) + 6;
            const inits = Math.floor(Math.random() * 3) + 3;
            const vtamSess = Math.floor(Math.random() * 8) + 5;
            
            updateInfoDisplay('D A,L - Display Activity', `
                <div class="info-title">SYSTEM ACTIVITY REPORT</div>
                <div class="info-section">
                    <div class="info-section-title">CURRENT ACTIVITY SUMMARY</div>
                    <table class="info-table">
                        <tr><th>Component</th><th>Active</th><th>Maximum</th><th>Status</th></tr>
                        <tr><td>Batch Jobs</td><td>${executing}</td><td>15</td><td class="status-active">NORMAL</td></tr>
                        <tr><td>TSO Users</td><td>${tsUsers}</td><td>50</td><td class="status-active">NORMAL</td></tr>
                        <tr><td>System Tasks</td><td>${sysas}</td><td>12</td><td class="status-active">NORMAL</td></tr>
                        <tr><td>JES2 Initiators</td><td>${inits}</td><td>8</td><td class="status-active">ACTIVE</td></tr>
                        <tr><td>VTAM Sessions</td><td>${vtamSess}</td><td>15</td><td class="status-active">ACTIVE</td></tr>
                    </table>
                </div>
                <div class="info-section">
                    <div class="info-section-title">PERFORMANCE INDICATORS</div>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">CPU Utilization:</span>
                            <span class="info-value">${(Math.random() * 30 + 60).toFixed(1)}%</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Storage Usage:</span>
                            <span class="info-value">${(Math.random() * 20 + 65).toFixed(1)}%</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">I/O Rate:</span>
                            <span class="info-value">${Math.floor(Math.random() * 500 + 1000)}/sec</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Response Time:</span>
                            <span class="info-value">${(Math.random() * 0.5 + 0.2).toFixed(2)}s</span>
                        </div>
                    </div>
                </div>
            `);
        }

        function displayJobs() {
            addConsoleMessage('$DJQ', 'job');
            
            const inputJobs = jobs.filter(job => job.status === 'INPUT');
            const execJobs = jobs.filter(job => job.status === 'EXECUTING');
            const endedJobs = jobs.filter(job => job.status === 'ENDED');
            const abendedJobs = jobs.filter(job => job.status === 'ABENDED');
            
            updateInfoDisplay('$DJQ - Display Job Queue', `
                <div class="info-title">JES2 JOB QUEUE STATUS</div>
                <div class="info-section">
                    <div class="info-section-title">QUEUE SUMMARY</div>
                    <table class="info-table">
                        <tr><th>Queue</th><th>Count</th><th>Class Distribution</th><th>Status</th></tr>
                        <tr><td>INPUT</td><td>${inputJobs.length}</td><td>A:${inputJobs.filter(j=>j.class==='A').length} B:${inputJobs.filter(j=>j.class==='B').length} C:${inputJobs.filter(j=>j.class==='C').length}</td><td class="status-active">ACTIVE</td></tr>
                        <tr><td>EXECUTION</td><td>${execJobs.length}</td><td>A:${execJobs.filter(j=>j.class==='A').length} B:${execJobs.filter(j=>j.class==='B').length} S:${execJobs.filter(j=>j.class==='S').length}</td><td class="status-active">ACTIVE</td></tr>
                        <tr><td>OUTPUT</td><td>${endedJobs.length}</td><td>Completed Jobs</td><td class="status-active">READY</td></tr>
                        <tr><td>HELD</td><td>${jobs.filter(j=>j.status==='HELD').length}</td><td>Operator Hold</td><td class="status-warning">HELD</td></tr>
                    </table>
                </div>
                <div class="info-section">
                    <div class="info-section-title">ACTIVE JOBS DETAIL</div>
                    <table class="info-table">
                        <tr><th>Job Name</th><th>Job ID</th><th>Class</th><th>Status</th><th>Step</th></tr>
                        ${execJobs.slice(0, 5).map(job => 
                            `<tr><td>${job.jobname}</td><td>${job.jobid}</td><td>${job.class}</td><td class="status-active">${job.status}</td><td>${job.step}</td></tr>`
                        ).join('')}
                    </table>
                </div>
                <div class="info-section">
                    <div class="info-section-title">COMPLETION STATISTICS</div>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Jobs Ended:</span>
                            <span class="info-value">${endedJobs.length}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Jobs Abended:</span>
                            <span class="info-value status-warning">${abendedJobs.length}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Success Rate:</span>
                            <span class="info-value">${((endedJobs.length / Math.max(endedJobs.length + abendedJobs.length, 1)) * 100).toFixed(1)}%</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Avg Runtime:</span>
                            <span class="info-value">00:12:34</span>
                        </div>
                    </div>
                </div>
            `);
        }

        function displayDasd() {
            updateInfoDisplay('D U,DASD - Display DASD Status', `
                <div class="info-title">DASD STORAGE UTILIZATION</div>
                <div class="info-section">
                    <div class="info-section-title">VOLUME STATUS</div>
                    <table class="info-table">
                        <tr><th>Unit</th><th>Type</th><th>Status</th><th>Volume</th><th>Used MB</th><th>Free MB</th><th>%Full</th></tr>
                        <tr><td>0191</td><td>3390</td><td class="status-active">ONLINE</td><td>WORK01</td><td>7,524</td><td>1,876</td><td>80.1%</td></tr>
                        <tr><td>0192</td><td>3390</td><td class="status-active">ONLINE</td><td>SYSRES</td><td>4,521</td><td>4,879</td><td>48.1%</td></tr>
                        <tr><td>0193</td><td>3390</td><td class="status-active">ONLINE</td><td>PAGE01</td><td>8,901</td><td>501</td><td>94.7%</td></tr>
                        <tr><td>0194</td><td>3390</td><td class="status-warning">PENDING</td><td>USER01</td><td>6,234</td><td>3,166</td><td>66.3%</td></tr>
                        <tr><td>0195</td><td>3390</td><td class="status-active">ONLINE</td><td>TEMP01</td><td>2,145</td><td>7,255</td><td>22.8%</td></tr>
                    </table>
                </div>
                <div class="info-section">
                    <div class="info-section-title">STORAGE ALERTS</div>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Critical (>90%):</span>
                            <span class="info-value status-warning">1 Volume</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Warning (>80%):</span>
                            <span class="info-value status-warning">1 Volume</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Total Capacity:</span>
                            <span class="info-value">46.8 GB</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Available Space:</span>
                            <span class="info-value">17.7 GB</span>
                        </div>
                    </div>
                </div>
            `);
        }

        function displayTime() {
            addConsoleMessage('D T', 'info');
            addConsoleMessage(`IEE136I LOCAL: TIME=${getCurrentTime()} DATE=${getCurrentJulianDate()}`, 'system');
        }

        function clearConsole() {
            document.getElementById('console').innerHTML = '';
            addConsoleMessage('*** CONSOLE CLEARED BY OPERATOR ***', 'system');
        }

        function toggleSystem() {
            const btn = document.getElementById('systemToggle');
            isSystemActive = !isSystemActive;
            
            if (isSystemActive) {
                btn.textContent = 'QUIESCE';
                addConsoleMessage('IEE043I A SYSTEM RESUME CONSOLE COMMAND HAS BEEN ISSUED', 'system');
            } else {
                btn.textContent = 'RESUME';
                addConsoleMessage('IEE042I A SYSTEM QUIESCE CONSOLE COMMAND HAS BEEN ISSUED', 'warning');
            }
        }

        function handleCommand(event) {
            if (event.key === 'Enter') {
                const command = event.target.value.toUpperCase();
                event.target.value = '';
                
                addConsoleMessage(command, 'info');
                
                // Process MVS commands
                if (command.startsWith('D A')) {
                    displayActive();
                } else if (command.startsWith('D T')) {
                    displayTime();
                } else if (command.startsWith('$D')) {
                    displayJobs();
                } else if (command.startsWith('D U,DASD') || command === 'D U') {
                    displayDasd();
                    addConsoleMessage('IEE457I UNIT STATUS 456', 'system');
                } else if (command.startsWith('D M=CPU') || command === 'D M') {
                    displayCpu();
                    addConsoleMessage('IEE174I 14:25:30 ACTIVITY 456', 'system');
                } else if (command.startsWith('D IPLINFO')) {
                    displayIplInfo();
                    addConsoleMessage('IEE254I 14:25:30 IPLINFO DISPLAY 456', 'system');
                } else if (command.startsWith('D ASM')) {
                    displayAsm();
                    addConsoleMessage('IRA100I PAGE DATASETS 456', 'system');
                } else if (command.startsWith('D SMF')) {
                    displaySmf();
                    addConsoleMessage('IGD100I SMF STATUS 456', 'system');
                } else if (command.startsWith('D TS') || command === 'D TS,L') {
                    displayTso();
                    addConsoleMessage('IKJ005I TSOUSERS DISPLAY 456', 'system');
                } else if (command.startsWith('$DA')) {
                    displayJes2Activity();
                    addConsoleMessage('$HASP603 MVS1 INACTIVE ---- ACTIVE ----', 'job');
                } else if (command.startsWith('$PJOBQ')) {
                    purgeJobs();
                } else if (command.startsWith('K ')) {
                    handleReply(command);
                } else if (command.startsWith('S ')) {
                    startProcedure(command);
                } else if (command.startsWith('P ')) {
                    stopProcedure(command);
                } else if (command.startsWith('V NET')) {
                    handleVtam(command);
                } else if (command.startsWith('F CICS')) {
                    handleCics(command);
                } else if (command.startsWith('-DB2')) {
                    handleDb2(command);
                } else if (command === 'HELP' || command === '?') {
                    displayHelp();
                } else if (command === 'COMMANDS') {
                    displayCommands();
                } else {
                    addConsoleMessage(`IEE305I COMMAND ${command} INVALID`, 'error');
                }
            }
        }

        function displayDasd() {
            addConsoleMessage('IEE457I UNIT STATUS 456', 'system');
            addConsoleMessage('UNIT TYPE STATUS        VOLSER PRIVATE/STOR/PUBL', 'system');
            addConsoleMessage('0191 3390 ONLINE        WORK01    7524/  45/    0', 'system');
            addConsoleMessage('0192 3390 ONLINE        SYSRES    4521/1247/    0', 'system');
            addConsoleMessage('0193 3390 ONLINE        PAGE01    8901/ 234/    0', 'system');
        }

        function displayCpu() {
            addConsoleMessage('IEE174I 14:25:30 ACTIVITY 456', 'system');
            addConsoleMessage('CPU 0 ONLINE   CPU 1 ONLINE   CPU 2 ONLINE   CPU 3 ONLINE', 'system');
            addConsoleMessage(`UTILIZATION: ${(Math.random() * 40 + 50).toFixed(1)}%`, 'system');
        }

        function displayIplInfo() {
            addConsoleMessage('IEE254I 14:25:30 IPLINFO DISPLAY 456', 'system');
            addConsoleMessage('SYSTEM IPLED AT 10:15:30 ON 2025.201', 'system');
            addConsoleMessage('IPLPARM = 00', 'system');
            addConsoleMessage('LOAD PARAMETER = 0', 'system');
        }

        function displayAsm() {
            addConsoleMessage('IRA100I PAGE DATASETS 456', 'system');
            addConsoleMessage('DATASET                PAGES      %FULL STATUS', 'system');
            addConsoleMessage('SYS1.PAGELOC          12547        45   ACTIVE', 'system');
            addConsoleMessage('SYS1.PAGECNV           8234        32   ACTIVE', 'system');
        }

        function displaySmf() {
            addConsoleMessage('IGD100I SMF STATUS 456', 'system');
            addConsoleMessage('RECORDING ACTIVE TO SYS1.MANX', 'system');
            addConsoleMessage('RECORDING ACTIVE TO SYS1.MANY', 'system');
        }

        function displayTso() {
            addConsoleMessage('IKJ005I TSOUSERS DISPLAY 456', 'system');
            addConsoleMessage('USERID   TERMINAL REGION   LOGON TIME', 'system');
            addConsoleMessage('SYSOPR   3270001  00512K   10:15:30', 'system');
            addConsoleMessage('DEVUSER  3270005  01024K   11:22:45', 'system');
            addConsoleMessage('TESTUSER 3270007  00256K   13:45:12', 'system');
        }

        function displayJes2Activity() {
            addConsoleMessage('$HASP603 MVS1 INACTIVE ---- ACTIVE ----', 'job');
            addConsoleMessage('QUEUE   MAX-ACTIVE  ACTIVE', 'job');
            addConsoleMessage('INPUT        0         5', 'job');
            addConsoleMessage('SETUP        0         0', 'job');
            addConsoleMessage('EXEC        15         8', 'job');
            addConsoleMessage('XEQHOST      5         2', 'job');
            addConsoleMessage('OUTPUT      25        12', 'job');
            addConsoleMessage('HARDCOPY     3         1', 'job');
        }

        function purgeJobs() {
            const completedJobs = jobs.filter(job => job.status === 'ENDED');
            if (completedJobs.length > 0) {
                const jobToPurge = completedJobs[Math.floor(Math.random() * completedJobs.length)];
                addConsoleMessage(`$HASP393 ${jobToPurge.jobname} PURGED`, 'job');
            } else {
                addConsoleMessage('$HASP890 NO JOBS TO PURGE', 'job');
            }
        }

        function handleReply(command) {
            const parts = command.split(' ');
            if (parts.length >= 2) {
                const addr = parts[1].replace(',', '');
                const response = parts.slice(2).join(' ') || '';
                if (addr === 'E') {
                    addConsoleMessage(`IEE600I REPLY TO ${parts[2] || '01'} IS; CANCELLED`, 'system');
                } else {
                    addConsoleMessage(`IEE600I REPLY TO ${addr.padStart(2, '0')} IS; ${response}`, 'system');
                }
            }
        }

        function startProcedure(command) {
            const proc = command.split(' ')[1] || 'UNKNOWN';
            addConsoleMessage(`IEE131I START(${proc}) PROC=${proc}`, 'system');
            if (proc.includes('CICS')) {
                addConsoleMessage(`DFHAC2206 ${proc} CICS INITIALIZATION COMPLETE`, 'system');
            } else if (proc.includes('DB2')) {
                addConsoleMessage(`DSNX101I ${proc} DB2 SUBSYSTEM STARTED`, 'system');
            }
        }

        function stopProcedure(command) {
            const proc = command.split(' ')[1] || 'UNKNOWN';
            addConsoleMessage(`IEE132I STOP(${proc}) PROC=${proc}`, 'warning');
        }

        function handleVtam(command) {
            addConsoleMessage('IST097I VARY ACCEPTED', 'system');
            if (command.includes('INACT')) {
                addConsoleMessage('IST924I APPLICATION INACTIVE', 'system');
            } else {
                addConsoleMessage('IST924I APPLICATION ACTIVE', 'system');
            }
        }

        function handleCics(command) {
            const cicsRegion = command.split(',')[0].split(' ')[1] || 'CICS1';
            if (command.includes('CEMT')) {
                addConsoleMessage(`DFHAC2206 ${cicsRegion} CEMT I SYS`, 'system');
                addConsoleMessage(' SYSTEM INFORMATION', 'system');
                addConsoleMessage(` NETNAME = ${cicsRegion}     CYCLE = 00667`, 'system');
            } else if (command.includes('NEWCOPY')) {
                const prog = command.split(' ').pop() || 'PROGRAM';
                addConsoleMessage(`DFHAC2206 ${cicsRegion} NEWCOPY FOR ${prog} SUCCESSFUL`, 'system');
            }
        }

        function handleDb2(command) {
            if (command.includes('DISPLAY DATABASE')) {
                addConsoleMessage('DSNX101I -DB2G DISPLAY DATABASE SUMMARY', 'system');
                addConsoleMessage('DATABASE = TESTDB    STATUS = RW', 'system');
                addConsoleMessage('DATABASE = PRODDB    STATUS = RW', 'system');
            } else if (command.includes('DISPLAY THREAD')) {
                addConsoleMessage('DSNX104I -DB2G DISPLAY THREAD(*)', 'system');
                addConsoleMessage('LUW = 00001   PLAN = PAYPLAN   STATUS = EXECUTING', 'system');
            }
        }

        function displayHelp() {
            addConsoleMessage('IBM Z/MVS CONSOLE COMMANDS:', 'info');
            addConsoleMessage('D A,L     - Display Activity', 'info');
            addConsoleMessage('D T       - Display Time', 'info');
            addConsoleMessage('D U,DASD  - Display DASD', 'info');
            addConsoleMessage('$DJQ      - Display Job Queue', 'info');
            addConsoleMessage('S proc    - Start Procedure', 'info');
            addConsoleMessage('K nn,resp - Reply to Message', 'info');
            addConsoleMessage('Type COMMANDS for full list', 'info');
        }

        function displayCommands() {
            addConsoleMessage('FULL COMMAND LIST:', 'info');
            addConsoleMessage('SYSTEM: D A,L | D T | D U,DASD | D M=CPU | D IPLINFO', 'info');
            addConsoleMessage('JES2: $DJQ | $DA | $PJOBQ', 'info');
            addConsoleMessage('CONTROL: S proc | P proc | K nn,resp', 'info');
            addConsoleMessage('STORAGE: D ASM | D SMF | D TS,L', 'info');
            addConsoleMessage('NETWORK: V NET,INACT,ID=app', 'info');
            addConsoleMessage('CICS: F CICS1,CEMT S SYS', 'info');
            addConsoleMessage('DB2: -DB2G DISPLAY DATABASE', 'info');
        }

        function updateStats() {
            const ended = jobs.filter(job => job.status === 'ENDED').length;
            const abended = jobs.filter(job => job.status === 'ABENDED').length;
            const executing = jobs.filter(job => job.status === 'EXECUTING').length;
            
            document.getElementById('jobsExecuted').textContent = (2847 + ended).toLocaleString();
            document.getElementById('abendRate').textContent = ((abended / Math.max(ended + abended, 1)) * 100).toFixed(1) + '%';
            document.getElementById('activeTasks').textContent = (127 + executing);
            document.getElementById('spoolUsage').textContent = (Math.random() * 40 + 15).toFixed(0) + '%';
            document.getElementById('msuRating').textContent = (1800 + Math.floor(Math.random() * 100));
            document.getElementById('dasdUtil').textContent = (Math.random() * 30 + 65).toFixed(0) + '%';
        }

        // Initialize the system
        updateJobTable();
        updateStats();

        // Start simulation loops
        setInterval(processJobs, 3000);
        setInterval(updateJobTable, 2000);
        setInterval(updateStats, 5000);

        // Add startup messages
        setTimeout(() => addConsoleMessage('IEE043I MVS SYSTEM INITIALIZATION COMPLETE', 'system'), 1000);
        setTimeout(() => addConsoleMessage('$HASP099 ALL AVAILABLE FUNCTIONS COMPLETE', 'job'), 2000);
    </script>
</body>
</html>